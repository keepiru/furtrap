#!/bin/bash

# Pre-commit hook for Go project
# This script runs tests and linting before allowing a commit

set -e

echo "ğŸ” Running pre-commit checks..."

# Change to the project root directory
cd "$(git rev-parse --show-toplevel)"

# Run Go tests
echo "ğŸ§ª Running go test..."
if ! go test ./...; then
    echo "âŒ Tests failed! Commit aborted."
    exit 1
fi

# Run golangci-lint
echo "ğŸ”§ Running golangci-lint..."
if ! golangci-lint run; then
    echo "âŒ Linting failed! Commit aborted."
    exit 1
fi

echo "âœ… All checks passed! Proceeding with commit."
